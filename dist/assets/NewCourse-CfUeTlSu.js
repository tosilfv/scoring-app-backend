import{r as d,A as I,u as S,R as t,L as T,s as g}from"./index-fCR7aONY.js";import{u as C,I as c,V as p,b as R}from"./Input-CAFoNuZS.js";import{u as V,E as H,B as E}from"./ErrorModal-B-AWeDTU.js";/* empty css                   */const $=()=>{const[u,b]=d.useState(0),[s,f]=d.useState([u]),v=d.useContext(I),A=S(),{isLoading:h,error:y,sendRequest:L,clearError:w}=V(),[o,i]=C({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),N=async e=>{e.preventDefault();let a=[],r="",m="";for(let n=0;n<e.target.length;n++)for(let l=0;l<e.target.length;l++)e.target[l].id===`labname${n}`&&(r=e.target[l].value),e.target[l].id===`labpassword${n}`&&(m=e.target[l].value,a.push({name:r,password:m}),r="",m="");try{await L("https://scoring-app-backend.onrender.com/api/courses","POST",JSON.stringify({title:o.inputs.title.value,description:o.inputs.description.value,labs:a}),{Authorization:"Bearer "+v.token,"Content-Type":"application/json"}),A("/")}catch(n){console.log("err courseSubmitHandler: ",n)}},x=async e=>{e.preventDefault();const a=u+1,r=[...s,a];b(a),f(r)},D=async e=>{if(e.preventDefault(),s.length>1){const a=u-1;b(a);const r=s.slice(0,-1);f(r),o.isValid=!0}};return t.createElement(t.Fragment,null,t.createElement(H,{error:y,onClear:w}),t.createElement("form",{className:"course-form",onSubmit:N},h&&t.createElement(T,{asOverlay:!0}),t.createElement(c,{id:"title",placeholder:"title",element:"input",type:"text",label:"Title",validators:[p()],errorText:"Please enter a valid title.",onInput:i}),t.createElement(c,{id:"description",placeholder:"description",element:"textarea",label:"Description",validators:[R(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:i}),Array.from(s).map(e=>t.createElement(t.Fragment,{key:e},t.createElement("div",{style:g.main},"LAB",e),t.createElement(c,{id:`labname${e}`,placeholder:"lab name",element:"input",label:"Lab name",validators:[p()],errorText:"Please enter a valid lab name.",onInput:i}),t.createElement(c,{id:`labpassword${e}`,placeholder:"lab password",element:"input",label:"Lab password",validators:[p()],errorText:"Please enter a valid lab password.",onInput:i}))),t.createElement("div",{style:g.button},t.createElement(E,{onClick:x},"+ ADD NEW LAB"),t.createElement(E,{onClick:D},"- REMOVE NEW LAB")),t.createElement(E,{type:"submit",disabled:!o.isValid},"ADD COURSE")))};export{$ as default};
