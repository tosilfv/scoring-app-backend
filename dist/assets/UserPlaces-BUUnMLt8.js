import{r as d,A as D,R as e,a as h,b as P}from"./index-JZdi9Rnb.js";import{C as f}from"./Card-0Z-Vace0.js";import{u as C,E as g,M as p,B as c}from"./http-hook-DeVzMSQf.js";const y=t=>{const{isLoading:a,error:s,sendRequest:u,clearError:o}=C(),r=d.useContext(D),[i,l]=d.useState(!1),m=()=>{l(!0)},n=()=>{l(!1)},E=async()=>{l(!1);try{await u(`https://scoring-app-backend.onrender.com/api/places/${t.id}`,"DELETE",null,{Authorization:"Bearer "+r.token}),t.onDelete(t.id)}catch{}};return e.createElement(e.Fragment,null,e.createElement(g,{error:s,onClear:o}),e.createElement(p,{show:i,onCancel:n,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:e.createElement(e.Fragment,null,e.createElement(c,{inverse:!0,onClick:n},"CANCEL"),e.createElement(c,{danger:!0,onClick:E},"DELETE"))},e.createElement("p",null,"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.")),e.createElement("li",{className:"place-item"},e.createElement(f,{className:"place-item__content"},a&&e.createElement(h,{asOverlay:!0}),e.createElement("div",{className:"place-item__info"},e.createElement("h2",null,t.title),e.createElement("h3",null,t.address),e.createElement("p",null,t.description)),e.createElement("div",{className:"place-item__actions"},r.userId===t.creatorId&&e.createElement(c,{to:`/places/${t.id}`},"EDIT"),r.userId===t.creatorId&&e.createElement(c,{danger:!0,onClick:m},"DELETE")))))},I=t=>t.items.length===0?e.createElement("div",{className:"place-list center"},e.createElement(f,null,e.createElement("h2",null,"No places found. Maybe create one?"),e.createElement(c,{to:"/places/new"},"Share Place"))):e.createElement("ul",{className:"place-list"},t.items.map(a=>e.createElement(y,{key:a.id,id:a.id,image:a.image,title:a.title,description:a.description,address:a.address,creatorId:a.creator,coordinates:a.location,onDelete:t.onDeletePlace}))),k=()=>{const[t,a]=d.useState(),{isLoading:s,error:u,sendRequest:o,clearError:r}=C(),i=P().userId;d.useEffect(()=>{(async()=>{try{const n=await o(`https://scoring-app-backend.onrender.com/api/places/user/${i}`);a(n.places)}catch{}})()},[o,i]);const l=m=>{a(n=>n.filter(E=>E.id!==m))};return e.createElement(e.Fragment,null,e.createElement(g,{error:u,onClear:r}),s&&e.createElement("div",{className:"center"},e.createElement(h,null)),!s&&t&&e.createElement(I,{items:t,onDeletePlace:l}))};export{k as default};
