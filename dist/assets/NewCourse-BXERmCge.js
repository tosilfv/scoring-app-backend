import{r as u,A as I,u as S,R as e,L as T,s as b}from"./index-C0kEm07W.js";import{u as D,I as o,V as m,b as R}from"./Input-C9O3P4af.js";import{u as C,E as O,B as d}from"./ErrorModal-CqX2Pi3C.js";/* empty css                   */const k=()=>{const[p,f]=u.useState(0),[E,g]=u.useState([p]),v=u.useContext(I),A=S(),{isLoading:h,error:y,sendRequest:L,clearError:w}=C(),[i,s]=D({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),N=async t=>{t.preventDefault();let l=[],n="",c="";for(let a=0;a<t.target.length;a++)for(let r=0;r<t.target.length;r++)t.target[r].id===`labname${a}`&&(n=t.target[r].value),t.target[r].id===`labpassword${a}`&&(c=t.target[r].value,l.push({name:n,password:c}),n="",c="");try{await L("https://scoring-app-backend.onrender.com/api/courses","POST",JSON.stringify({title:i.inputs.title.value,description:i.inputs.description.value,labs:l}),{Authorization:"Bearer "+v.token,"Content-Type":"application/json"}),A("/")}catch(a){console.log("err courseSubmitHandler: ",a)}},x=async t=>{t.preventDefault();const l=p+1,n=[...E,l];f(l),g(n)};return e.createElement(e.Fragment,null,e.createElement(O,{error:y,onClear:w}),e.createElement("form",{className:"course-form",onSubmit:N},h&&e.createElement(T,{asOverlay:!0}),e.createElement(o,{id:"title",placeholder:"title",element:"input",type:"text",label:"Title",validators:[m()],errorText:"Please enter a valid title.",onInput:s}),e.createElement(o,{id:"description",placeholder:"description",element:"textarea",label:"Description",validators:[R(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:s}),Array.from(E).map(t=>e.createElement(e.Fragment,{key:t},e.createElement("div",{style:b.main},"Lab",t),e.createElement(o,{id:`labname${t}`,placeholder:"lab name",element:"input",label:"Lab name",validators:[m()],errorText:"Please enter a valid lab name.",onInput:s}),e.createElement(o,{id:`labpassword${t}`,placeholder:"lab password",element:"input",label:"Lab password",validators:[m()],errorText:"Please enter a valid lab password.",onInput:s}))),e.createElement("div",{style:b.button},e.createElement(d,{onClick:x},"+ ADD NEW LAB"),e.createElement(d,null,"- REMOVE NEW LAB")),e.createElement(d,{type:"submit",disabled:!i.isValid},"ADD COURSE")))};export{k as default};
