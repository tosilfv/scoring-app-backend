import{r as d,A as I,u as T,R as e,L as C,s as A}from"./index-xtEZ8P77.js";import{u as R,I as c,V as p,b as S}from"./Input-CE5mjgUN.js";import{u as V,E as O,B as E}from"./ErrorModal-CGldAPUT.js";/* empty css                   */const F=()=>{const[s,o]=R({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),[u,b]=d.useState(0),[i,f]=d.useState([u]),{isLoading:v,error:h,sendRequest:y,clearError:L}=V(),g=d.useContext(I),w=T(),N=async t=>{t.preventDefault();let a=[],r="",m="";for(let l=0;l<t.target.length;l++)for(let n=0;n<t.target.length;n++)t.target[n].id===`labname${l}`&&(r=t.target[n].value),t.target[n].id===`labpassword${l}`&&(m=t.target[n].value,a.push({name:r,password:m}),r="",m="");try{await y("https://scoring-app-backend.onrender.com/api/courses","POST",JSON.stringify({title:s.inputs.title.value,description:s.inputs.description.value,labs:a}),{Authorization:"Bearer "+g.token,"Content-Type":"application/json"}),w("/courses/all")}catch{}},x=async t=>{t.preventDefault();const a=u+1,r=[...i,a];b(a),f(r)},D=async t=>{if(t.preventDefault(),i.length>1){const a=u-1;b(a);const r=i.slice(0,-1);f(r),s.isValid=!0}};return e.createElement(e.Fragment,null,g.isAdmin&&e.createElement(e.Fragment,null,e.createElement(O,{error:h,onClear:L}),e.createElement("form",{className:"course-form",onSubmit:N},v&&e.createElement(C,{asOverlay:!0}),e.createElement(c,{id:"title",placeholder:"title",element:"input",type:"text",label:"Title",validators:[p()],errorText:"Please enter a valid title.",onInput:o}),e.createElement(c,{id:"description",placeholder:"description",element:"textarea",label:"Description",validators:[S(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:o}),Array.from(i).map(t=>e.createElement(e.Fragment,{key:t},e.createElement("div",{style:A.main},"LAB",t),e.createElement(c,{id:`labname${t}`,placeholder:"lab name",element:"input",label:"Lab name",validators:[p()],errorText:"Please enter a valid lab name.",onInput:o}),e.createElement(c,{id:`labpassword${t}`,placeholder:"lab password",element:"input",label:"Lab password",validators:[p()],errorText:"Please enter a valid lab password.",onInput:o}))),e.createElement("div",{style:A.button},e.createElement(E,{onClick:x},"+ ADD NEW LAB"),e.createElement(E,{onClick:D},"- REMOVE NEW LAB")),e.createElement(E,{type:"submit",disabled:!s.isValid},"ADD COURSE"))))};export{F as default};
