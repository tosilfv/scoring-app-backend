import{r as m,A as N,R as e,L as C,a as w}from"./index-MT3Oe3R8.js";import{u as f,E as h,M as I,B as o}from"./ErrorModal-CzjFxKES.js";import{C as g}from"./Card-sYMfem45.js";const L=t=>{const{isLoading:r,error:l,sendRequest:d,clearError:c}=f(),a=m.useContext(N),[i,s]=m.useState(!1),u=()=>{s(!0)},n=()=>{s(!1)},E=async()=>{s(!1);try{await d(`https://scoring-app-backend.onrender.com/api/courses/${t.id}`,"DELETE",null,{Authorization:"Bearer "+a.token}),t.onDelete(t.id)}catch(D){console.log("err: ",D)}};return e.createElement(e.Fragment,null,e.createElement(h,{error:l,onClear:c}),e.createElement(I,{show:i,onCancel:n,header:"Are you sure?",footerClass:"course-item__modal-actions",footer:e.createElement(e.Fragment,null,e.createElement(o,{inverse:!0,onClick:n},"CANCEL"),e.createElement(o,{danger:!0,onClick:E},"OK"))},e.createElement("p",null,"Do you want to delete this course? This action cannot be undone.")),e.createElement("li",{className:"course-item"},e.createElement(g,{className:"course-item__content"},r&&e.createElement(C,{asOverlay:!0}),e.createElement("div",{className:"course-item__info"},e.createElement("h2",null,t.title),e.createElement("h3",null,t.address),e.createElement("p",null,t.description)),e.createElement("div",{className:"course-item__actions"},a.userId===t.creatorId&&e.createElement(o,{to:`/courses/${t.id}`},"EDIT"),a.userId===t.creatorId&&e.createElement(o,{danger:!0,onClick:u},"DELETE")))))},y=t=>t.items.length===0?e.createElement("div",{className:"course-list center"},e.createElement(g,null,e.createElement("h2",null,"No courses found."),e.createElement(o,{to:"/courses/new"},"New Course"))):e.createElement("ul",{className:"course-list"},t.items.map(r=>e.createElement(L,{key:r.id,id:r.id,title:r.title,description:r.description,address:r.address,creatorId:r.creator,onDelete:t.onDeleteCourse}))),A=()=>{const[t,r]=m.useState(),{isLoading:l,error:d,sendRequest:c,clearError:a}=f(),i=w().userId;m.useEffect(()=>{(async()=>{try{const n=await c(`https://scoring-app-backend.onrender.com/api/courses/user/${i}`);r(n.courses)}catch(n){console.log("err: ",n)}})()},[c,i]);const s=u=>{r(n=>n.filter(E=>E.id!==u))};return e.createElement(e.Fragment,null,e.createElement(h,{error:d,onClear:a}),l&&e.createElement("div",{className:"center"},e.createElement(C,null)),!l&&t&&e.createElement(y,{items:t,onDeleteCourse:s}))};export{A as default};
