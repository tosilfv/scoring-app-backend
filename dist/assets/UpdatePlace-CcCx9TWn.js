import{r as n,A as h,b as I,u as P,R as e,a as A}from"./index-JZdi9Rnb.js";import{u as C,I as m,V as b,a as T}from"./form-hook-CWK0Kl06.js";import{u as g,E as x,B as y}from"./http-hook-DeVzMSQf.js";import{C as D}from"./Card-0Z-Vace0.js";/* empty css                  */const U=()=>{const s=n.useContext(h),{isLoading:c,error:o,sendRequest:r,clearError:E}=g(),[a,f]=n.useState(),i=I().placeId,v=P(),[l,p,u]=C({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);n.useEffect(()=>{(async()=>{try{const t=await r(`https://scoring-app-backend.onrender.com/api/places/${i}`);f(t.place),u({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)}catch{}})()},[r,i,u]);const V=async d=>{d.preventDefault();try{await r(`https://scoring-app-backend.onrender.com/api/places/${i}`,"PATCH",JSON.stringify({title:l.inputs.title.value,description:l.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+s.token}),v("/"+s.userId+"/places")}catch{}};return c?e.createElement("div",{className:"center"},e.createElement(A,null)):!a&&!o?e.createElement("div",{className:"center"},e.createElement(D,null,e.createElement("h2",null,"Could not find place!"))):e.createElement(e.Fragment,null,e.createElement(x,{error:o,onClear:E}),!c&&a&&e.createElement("form",{className:"place-form",onSubmit:V},e.createElement(m,{id:"title",element:"input",type:"text",label:"Title",validators:[b()],errorText:"Please enter a valid title.",onInput:p,initialValue:a.title,initialValid:!0}),e.createElement(m,{id:"description",element:"textarea",label:"Description",validators:[T(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:p,initialValue:a.description,initialValid:!0}),e.createElement(y,{type:"submit",disabled:!l.isValid},"UPDATE PLACE")))};export{U as default};
