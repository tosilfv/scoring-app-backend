import{r as E,A as w,R as e,L as f,a as N}from"./index-C0kEm07W.js";import{u as h,E as g,M as v,B as c}from"./ErrorModal-CqX2Pi3C.js";import{C as D}from"./Card-DtKrXdOl.js";const y=t=>{const{isLoading:r,error:i,sendRequest:C,clearError:u}=h(),a=E.useContext(w),[m,s]=E.useState(!1),d=()=>{s(!0)},n=()=>{s(!1)},l=async()=>{s(!1);try{await C(`https://scoring-app-backend.onrender.com/api/courses/${t.id}`,"DELETE",null,{Authorization:"Bearer "+a.token}),t.onDelete(t.id)}catch(o){console.log("err: ",o)}};return e.createElement(e.Fragment,null,e.createElement(g,{error:i,onClear:u}),e.createElement(v,{show:m,onCancel:n,header:"Are you sure?",footerClass:"course-item__modal-actions",footer:e.createElement(e.Fragment,null,e.createElement(c,{inverse:!0,onClick:n},"CANCEL"),e.createElement(c,{danger:!0,onClick:l},"OK"))},e.createElement("p",null,"Do you want to delete this course? This action cannot be undone.")),e.createElement("li",{className:"course-item"},e.createElement(D,{className:"course-item__content"},r&&e.createElement(f,{asOverlay:!0}),e.createElement("div",{className:"course-item__info"},e.createElement("h2",null,t.title),e.createElement("h3",null,t.description),t.labs.map(o=>e.createElement("div",{key:o._id},e.createElement("div",null,o.name),e.createElement("div",null,o.password)))),e.createElement("div",{className:"course-item__actions"},a.userId===t.creatorId&&e.createElement(c,{to:`/courses/${t.id}`},"EDIT"),a.userId===t.creatorId&&e.createElement(c,{danger:!0,onClick:d},"DELETE")))))},I=t=>t.items.length===0?e.createElement("div",{className:"course-list center"},e.createElement(D,null,e.createElement("h2",null,"No courses found."),e.createElement(c,{to:"/courses/new"},"New Course"))):e.createElement("ul",{className:"course-list"},t.items.map(r=>e.createElement(y,{key:r.id,id:r.id,title:r.title,description:r.description,labs:r.labs,creatorId:r.creator,onDelete:t.onDeleteCourse}))),A=()=>{const[t,r]=E.useState(),{isLoading:i,error:C,sendRequest:u,clearError:a}=h(),m=N().userId;E.useEffect(()=>{(async()=>{let n;try{n=await u(`https://scoring-app-backend.onrender.com/api/courses/user/${m}`)}catch(l){console.log("err UserCourses: ",l)}n&&r(n.courses)})()},[u,m]);const s=d=>{r(n=>n.filter(l=>l.id!==d))};return e.createElement(e.Fragment,null,e.createElement(g,{error:C,onClear:a}),i&&e.createElement("div",{className:"center"},e.createElement(f,null)),!i&&t&&e.createElement(I,{items:t,onDeleteCourse:s}))};export{A as default};
