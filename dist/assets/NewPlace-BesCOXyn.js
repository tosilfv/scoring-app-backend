import{r as v,A as E,u as f,R as e,a as A}from"./index-CbpUhwgc.js";import{u as h,I as r,V as s,a as x}from"./form-hook-BUeuaOxX.js";import{u as I,E as T,B as b}from"./http-hook-CPVO0yN6.js";/* empty css                  */const C=()=>{const l=v.useContext(E),n=f(),{isLoading:i,error:o,sendRequest:d,clearError:c}=I(),[t,a]=h({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1}},!1),p=async u=>{u.preventDefault();try{await d("https://scoring-app-backend.onrender.com/api/places","POST",JSON.stringify({title:t.inputs.title.value,description:t.inputs.description.value,address:t.inputs.address.value}),{Authorization:"Bearer "+l.token,"Content-Type":"application/json"}),n("/")}catch(m){console.log("err: ",m)}};return e.createElement(e.Fragment,null,e.createElement(T,{error:o,onClear:c}),e.createElement("form",{className:"place-form",onSubmit:p},i&&e.createElement(A,{asOverlay:!0}),e.createElement(r,{id:"title",placeholder:"title",element:"input",type:"text",label:"Title",validators:[s()],errorText:"Please enter a valid title.",onInput:a}),e.createElement(r,{id:"description",placeholder:"description",element:"textarea",label:"Description",validators:[x(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:a}),e.createElement(r,{id:"address",placeholder:"address",element:"input",label:"Address",validators:[s()],errorText:"Please enter a valid address.",onInput:a}),e.createElement(b,{type:"submit",disabled:!t.isValid},"ADD PLACE")))};export{C as default};
