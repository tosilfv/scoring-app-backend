import{r as u,R as s}from"./index-JZdi9Rnb.js";const o="REQUIRE",A="MINLENGTH",V="MAXLENGTH",f="MIN",m="MAX",E="EMAIL",h=()=>({type:o}),y=e=>({type:A,val:e}),L=()=>({type:E}),p=(e,t)=>{let i=!0;for(const l of t)l.type===o&&(i=i&&e.trim().length>0),l.type===A&&(i=i&&e.trim().length>=l.val),l.type===V&&(i=i&&e.trim().length<=l.val),l.type===f&&(i=i&&+e>=l.val),l.type===m&&(i=i&&+e<=l.val),l.type===E&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i},R=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:p(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},N=e=>{const[t,i]=u.useReducer(R,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:l,onInput:r}=e,{value:d,isValid:a}=t;u.useEffect(()=>{r(l,d,a)},[l,d,a,r]);const n=I=>{i({type:"CHANGE",val:I.target.value,validators:e.validators})},c=()=>{i({type:"TOUCH"})},T=e.element==="input"?s.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:n,onBlur:c,value:t.value}):s.createElement("textarea",{id:e.id,rows:e.rows||3,onChange:n,onBlur:c,value:t.value});return s.createElement("div",{className:`form-control ${!t.isValid&&t.isTouched&&"form-control--invalid"}`},s.createElement("label",{htmlFor:e.id},e.label),T,!t.isValid&&t.isTouched&&s.createElement("p",null,e.errorText))},v=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const l in e.inputs)e.inputs[l]&&(l===t.inputId?i=i&&t.isValid:i=i&&e.inputs[l].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},H=(e,t)=>{const[i,l]=u.useReducer(v,{inputs:e,isValid:t}),r=u.useCallback((a,n,c)=>{l({type:"INPUT_CHANGE",value:n,isValid:c,inputId:a})},[]),d=u.useCallback((a,n)=>{l({type:"SET_DATA",inputs:a,formIsValid:n})},[]);return[i,r,d]};export{N as I,h as V,y as a,L as b,H as u};
