import{r as n,A as h,a as g,u as I,R as e,L as b}from"./index-2bMJbr3r.js";import{u as A,I as p,V as T,b as x}from"./Input-B4Jn6B2e.js";import{u as y,E as R,B as D}from"./ErrorModal-CcmeLWGh.js";import{C as L}from"./Card-DiVCC_vI.js";/* empty css                   */const O=()=>{const m=n.useContext(h),{isLoading:o,error:l,sendRequest:r,clearError:E}=y(),[a,f]=n.useState(),s=g().courseId,v=I(),[i,c,u]=A({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);n.useEffect(()=>{(async()=>{let t;try{t=await r(`https://scoring-app-backend.onrender.com/api/courses/${s}`)}catch(V){console.log("err: ",V)}t&&f(t.course),t&&u({title:{value:t.course.title,isValid:!0},description:{value:t.course.description,isValid:!0}},!0)})()},[r,s,u]);const C=async d=>{d.preventDefault();try{await r(`https://scoring-app-backend.onrender.com/api/courses/${s}`,"PATCH",JSON.stringify({title:i.inputs.title.value,description:i.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+m.token}),v("/courses/all")}catch(t){console.log("err: ",t)}};return o?e.createElement("div",{className:"center"},e.createElement(b,null)):!a&&!l?e.createElement("div",{className:"center"},e.createElement(L,null,e.createElement("h2",null,"Could not find course!"))):e.createElement(e.Fragment,null,e.createElement(R,{error:l,onClear:E}),!o&&a&&e.createElement("form",{className:"course-form",onSubmit:C},e.createElement(p,{id:"title",element:"input",type:"text",label:"Title",validators:[T()],errorText:"Please enter a valid title.",onInput:c,initialValue:a.title,initialValid:!0}),e.createElement(p,{id:"description",element:"textarea",label:"Description",validators:[x(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:c,initialValue:a.description,initialValid:!0}),e.createElement(D,{type:"submit",disabled:!i.isValid},"UPDATE COURSE")))};export{O as default};
