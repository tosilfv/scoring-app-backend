import{r as n,A as V,b as h,u as I,R as e,a as g}from"./index-foS3uHt8.js";import{u as b,I as m,V as A,a as T}from"./form-hook-Lf0HnSx4.js";import{u as x,E as y,B as R}from"./http-hook-qlqJwGvS.js";import{C as D}from"./Card-Bn5AJJ51.js";/* empty css                   */const U=()=>{const o=n.useContext(V),{isLoading:l,error:c,sendRequest:r,clearError:E}=x(),[a,f]=n.useState(),s=h().courseId,v=I(),[i,u,d]=b({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);n.useEffect(()=>{(async()=>{try{const t=await r(`https://scoring-app-backend.onrender.com/api/courses/${s}`);f(t.course),d({title:{value:t.course.title,isValid:!0},description:{value:t.course.description,isValid:!0}},!0)}catch(t){console.log("err: ",t)}})()},[r,s,d]);const C=async p=>{p.preventDefault();try{await r(`https://scoring-app-backend.onrender.com/api/courses/${s}`,"PATCH",JSON.stringify({title:i.inputs.title.value,description:i.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+o.token}),v("/"+o.userId+"/courses")}catch(t){console.log("err: ",t)}};return l?e.createElement("div",{className:"center"},e.createElement(g,null)):!a&&!c?e.createElement("div",{className:"center"},e.createElement(D,null,e.createElement("h2",null,"Could not find course!"))):e.createElement(e.Fragment,null,e.createElement(y,{error:c,onClear:E}),!l&&a&&e.createElement("form",{className:"course-form",onSubmit:C},e.createElement(m,{id:"title",element:"input",type:"text",label:"Title",validators:[A()],errorText:"Please enter a valid title.",onInput:u,initialValue:a.title,initialValid:!0}),e.createElement(m,{id:"description",element:"textarea",label:"Description",validators:[T(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:u,initialValue:a.description,initialValid:!0}),e.createElement(R,{type:"submit",disabled:!i.isValid},"UPDATE COURSE")))};export{U as default};
