import{r as d,A as p,R as e,a as h,b as P}from"./index-BCgOLtny.js";import{C as f}from"./Card-8CA250M_.js";import{u as g,E as C,M as y,B as c}from"./http-hook-d4EMoGzl.js";const I=t=>{const{isLoading:a,error:s,sendRequest:u,clearError:o}=g(),r=d.useContext(p),[i,l]=d.useState(!1),m=()=>{l(!0)},n=()=>{l(!1)},E=async()=>{l(!1);try{await u(`https://scoring-app-backend.onrender.com/api/places/${t.id}`,"DELETE",null,{Authorization:"Bearer "+r.token}),t.onDelete(t.id)}catch(D){console.log("err: ",D)}};return e.createElement(e.Fragment,null,e.createElement(C,{error:s,onClear:o}),e.createElement(y,{show:i,onCancel:n,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:e.createElement(e.Fragment,null,e.createElement(c,{inverse:!0,onClick:n},"CANCEL"),e.createElement(c,{danger:!0,onClick:E},"DELETE"))},e.createElement("p",null,"Do you want to proceed and delete this place? Please note that it can`&apos`t be undone thereafter.")),e.createElement("li",{className:"place-item"},e.createElement(f,{className:"place-item__content"},a&&e.createElement(h,{asOverlay:!0}),e.createElement("div",{className:"place-item__info"},e.createElement("h2",null,t.title),e.createElement("h3",null,t.address),e.createElement("p",null,t.description)),e.createElement("div",{className:"place-item__actions"},r.userId===t.creatorId&&e.createElement(c,{to:`/places/${t.id}`},"EDIT"),r.userId===t.creatorId&&e.createElement(c,{danger:!0,onClick:m},"DELETE")))))},L=t=>t.items.length===0?e.createElement("div",{className:"place-list center"},e.createElement(f,null,e.createElement("h2",null,"No places found. Maybe create one?"),e.createElement(c,{to:"/places/new"},"Share Place"))):e.createElement("ul",{className:"place-list"},t.items.map(a=>e.createElement(I,{key:a.id,id:a.id,image:a.image,title:a.title,description:a.description,address:a.address,creatorId:a.creator,coordinates:a.location,onDelete:t.onDeletePlace}))),k=()=>{const[t,a]=d.useState(),{isLoading:s,error:u,sendRequest:o,clearError:r}=g(),i=P().userId;d.useEffect(()=>{(async()=>{try{const n=await o(`https://scoring-app-backend.onrender.com/api/places/user/${i}`);a(n.places)}catch(n){console.log("err: ",n)}})()},[o,i]);const l=m=>{a(n=>n.filter(E=>E.id!==m))};return e.createElement(e.Fragment,null,e.createElement(C,{error:u,onClear:r}),s&&e.createElement("div",{className:"center"},e.createElement(h,null)),!s&&t&&e.createElement(L,{items:t,onDeletePlace:l}))};export{k as default};
